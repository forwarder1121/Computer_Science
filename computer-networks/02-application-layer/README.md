# 📘 Lecture 2. Application Layer

> 컴퓨터네트워크 2강 — 애플리케이션 계층 개요와 소켓, 전송 서비스

---

## 1. 애플리케이션 계층과 소켓

-   **애플리케이션 계층**: 사용자와 가장 가까운 계층, 실제 네트워크 서비스가 동작하는 영역
-   애플리케이션 프로세스는 **소켓(Socket)** 을 통해 네트워크에 접근
    -   소켓은 OS가 제공하는 API
    -   송신: `send()`, 수신: `recv()` 와 같은 시스템 콜로 데이터 교환
-   **클라이언트/서버 소켓**
    -   서버: 특정 포트(예: 80)에 **bind** 후 `listen` 상태 → 클라이언트 요청을 `accept`
    -   클라이언트: `connect` 호출로 서버와 연결 (클라에서는 `bind` 필수 아님, OS가 임의 포트 부여)
    -   연결 후 서버는 클라이언트별 **고유 소켓**을 생성하여 응답 → 자원은 많이 소모되지만 각 연결이 분리됨

---

## 2. 멀티플렉싱 & 디멀티플렉싱

-   **Multiplexing (MUX)**: 여러 애플리케이션 데이터 → 하나의 네트워크 인터페이스로 합쳐 보냄
-   **Demultiplexing (DEMUX)**: 수신 측에서 패킷의 헤더 정보를 보고, 해당 소켓/프로세스로 분배
-   기준:
    -   **UDP**: `(목적지 IP, 목적지 Port)` 로 구분
    -   **TCP**: `(출발지 IP, 출발지 Port, 목적지 IP, 목적지 Port)` 4-튜플로 구분
-   구현 방식:
    -   세그먼트 헤더를 확인해 해당 소켓(TCB, Transmission Control Block)으로 전달

---

## 3. 프로토콜과 헤더

-   프로토콜의 모든 동작은 **헤더 해석**에 의해 결정됨
-   **UDP 헤더 (4개 필드)**
    -   Source Port, Destination Port, Length, Checksum
    -   구조 단순, 동작 단순
-   **TCP 헤더**
    -   포트 번호, 시퀀스 번호, ACK 번호, 플래그 비트(SYN, ACK, FIN 등)
    -   연결 관리, 오류 제어, 흐름 제어, 혼잡 제어를 구현
-   **IP 헤더**도 상위 프로토콜 전달 시 사용 (예: TCP vs UDP 식별)

---

## 4. 신뢰적 데이터 전송 (Reliable Data Transfer, RDT)

-   **Stop-and-Wait 방식**
    -   송신자는 하나 보내고, ACK(잘 받음) 또는 NAK(에러) 기다림
    -   수신자는 잘 받았으면 ACK, 에러 있으면 NAK 반환
-   **문제 상황**
    -   ACK/NAK 유실 시 → 타이머 기반 재전송 필요
    -   중복 패킷 발생 가능 → **시퀀스 번호**로 구분
-   결과적으로 **오버헤드 증가**는 있지만 신뢰성 보장 가능

---

## 📒 참고

-   강의 영상: [Lec 2. Application Layer (KOCW)](https://www.kocw.net/home/cview.do?cid=6166c077e545b736)

---

## ✍️ 강의 필기

-   [2025-09-12-1.png](./notes/2025-09-12-1.png)
-   [2025-09-12-2.png](./notes/2025-09-12-2.png)
-   [2025-09-12-3.png](./notes/2025-09-12-3.png)
2